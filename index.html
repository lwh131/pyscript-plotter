<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyScript Plotly Sine Wave Plotter</title>
    <!-- PyScript version-pinned CDN -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
</head>
<body>
    <h1>ðŸ§  PyScript Plotly Sine Wave Plotter</h1>
    <p>Enter the parameters below to generate your interactive sine wave plot.</p>

    <div>
        <label for="amplitude">Amplitude:</label>
        <input type="number" id="amplitude" value="1" step="0.1"><br><br>

        <label for="frequency">Frequency:</label>
        <input type="number" id="frequency" value="1" step="0.1"><br><br>

        <label for="phase">Phase Shift (radians):</label>
        <input type="number" id="phase" value="0" step="0.1"><br><br>

        <button id="plot-button">Generate Plot</button>
    </div>

    <hr>

    <div id="plot-container"></div>

    <!-- 1. Changed package from "matplotlib" to "plotly" -->
    <py-config>
        packages = ["numpy", "plotly"]
    </py-config>

    <py-script>
        from pyodide.ffi import create_proxy
        from pyscript import document
        import numpy as np
        # 2. Changed import to use plotly
        import plotly.graph_objects as go
        import pyscript

        def plot_sine_wave(event):
            # Reading values from input fields (this part is unchanged)
            amplitude = float(document.getElementById("amplitude").value)
            frequency = float(document.getElementById("frequency").value)
            phase = float(document.getElementById("phase").value)

            # Generating data (this part is unchanged)
            x = np.linspace(0, 2 * np.pi, 400)
            y = amplitude * np.sin(frequency * x + phase)

            # 3. Create the plot using Plotly's syntax
            fig = go.Figure()
            
            # Add the sine wave data as a scatter plot (line mode)
            fig.add_trace(go.Scatter(
                x=x, 
                y=y, 
                mode='lines', 
                name=f'A={amplitude}, f={frequency}'
            ))
            
            # Configure the layout, title, and axis labels
            fig.update_layout(
                title="Interactive Sine Wave",
                xaxis_title="x",
                yaxis_title="y",
                template="plotly_white" # Optional: for a clean look
            )

            # Clear previous plot from the container
            plot_container = document.getElementById("plot-container")
            plot_container.innerHTML = ""

            # 4. Display the Plotly figure in the container (this works the same!)
            pyscript.display(fig, target="plot-container")

        # Event listener logic (this part is unchanged)
        plot_callback = create_proxy(plot_sine_wave)
        button = document.getElementById("plot-button")
        button.addEventListener("click", plot_callback)

    </py-script>

</body>
</html>