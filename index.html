<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyScript Plotly Sine Wave Plotter</title>
    <!-- PyScript version-pinned CDN -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
</head>
<body>
    <h1>ðŸ§  PyScript Plotly Sine Wave Plotter</h1>
    <p>Enter the parameters below to generate your interactive sine wave plot.</p>

    <div>
        <label for="amplitude">Amplitude:</label>
        <input type="number" id="amplitude" value="1" step="0.1"><br><br>

        <label for="frequency">Frequency:</label>
        <input type="number" id="frequency" value="1" step="0.1"><br><br>

        <label for="phase">Phase Shift (radians):</label>
        <input type="number" id="phase" value="0" step="0.1"><br><br>

        <button id="plot-button">Generate Plot</button>
    </div>

    <hr>

    <div id="plot-container"></div>

    <!-- 1. Changed package from "matplotlib" to "plotly" -->
    <py-config>
        packages = ["numpy", "plotly"]
    </py-config>

    <py-script>
        from pyodide.ffi import create_proxy
        from pyscript import document
        import numpy as np
        # 2. Changed import to use plotly
        import plotly.graph_objects as go
        import pyscript

        def plot_sine_wave(event):
            data = [[3], [2], [1]]

            fig = go.Figure(data=[go.Surface(z=data)])

            fig.update_layout(
                title=dict(text="3D Seabed Terrain Explorer", x=0.5, font=dict(size=18, color='white')),
                scene=dict(
                    xaxis=dict(title="Distance East (m)", showgrid=True, gridcolor='lightblue'),
                    yaxis=dict(title="Distance North (m)", showgrid=True, gridcolor='lightblue'),
                    zaxis=dict(title="Depth (m)", showgrid=True, gridcolor='lightblue', autorange='reversed'),
                    camera=dict(eye=dict(x=1.8, y=1.8, z=1.2)),
                    aspectratio=dict(x=1, y=1, z=0.4)
                ),
                template='plotly_dark')

            # Clear previous plot from the container
            plot_container = document.getElementById("plot-container")
            plot_container.innerHTML = ""

            # 4. Display the Plotly figure in the container (this works the same!)
            pyscript.display(fig, target="plot-container")

        # Event listener logic (this part is unchanged)
        plot_callback = create_proxy(plot_sine_wave)
        button = document.getElementById("plot-button")
        button.addEventListener("click", plot_callback)

    </py-script>

</body>
</html>